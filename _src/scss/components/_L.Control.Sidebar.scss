// Styles de leaflet-sidebar avec des adaptations.
//
// Modifications :
// z-index

$threshold-lg: 1200px;
$threshold-md: 992px;
$threshold-sm: 600px; //768px;

$width-lg: 460px;
$width-md: 390px;
$width-sm: 305px;
$width-xs: 70%; // 100%;

$transition-duration: 0.5s;

@mixin border-radius($border-radius) {
  -webkit-border-radius: $border-radius;
  border-radius: $border-radius;
}

@mixin box-sizing($box-sizing) {
  -webkit-box-sizing: $box-sizing;
  -moz-box-sizing: $box-sizing;
  box-sizing: $box-sizing;
}

@mixin widths($width) {
  width: $width;

  &.left.visible ~ .leaflet-left {
    left: $width;
  }

  &.right.visible ~ .leaflet-right {
    right: $width;
  }
}

.leaflet-sidebar {
  position: absolute;
  height: 100%;
  z-index: $zindex-map + 2;

  @include box-sizing(border-box);
  box-shadow: 0 0 0.5rem rgba($color-black, 0.5);
  // padding: 10px;
  // Suppression z-index
  // z-index: 2000;

  &.left {
    left: -500px;
    transition: left $transition-duration, width $transition-duration;

    // padding-right: 0;

    &.visible {
      left: 0;
    }
  }

  &.right {
    right: -500px;
    transition: right $transition-duration, width $transition-duration;

    // padding-left: 0;

    &.visible {
      right: 0;
    }
  }

  & > .leaflet-control {
    height: 100%;
    width: 100%;
    // Ajout z-index. + 2 afin d'être au-dessus du formulaire de recherche
    // qui est à +1.
    z-index: $zindex-map + 2;

    // overflow: auto;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    @include box-sizing(border-box);
    // padding: 8px 24px;
    padding: $spacing-unit-large $spacing-unit-small $spacing-unit $spacing-unit;
    // font-size: 1.1em;

    background: white;
    // box-shadow: 0 1px 7px rgba(0, 0, 0, 0.65);
    // @include border-radius(4px);

    .leaflet-touch & {
      // box-shadow: none;
      // border: 2px solid rgba(0, 0, 0, 0.2);
      background-clip: padding-box;
    }
  }

  @media (max-width: $threshold-sm - 1px) {
    @include widths($width-xs);

    // padding: 0;

    &.left {
      left: -$width-xs;

      &.visible {
        left: 0;
      }
    }

    &.right {
      right: -$width-xs;

      &.visible {
        right: 0;
      }
    }

    & > .leaflet-control {
      // box-shadow: none;
      // @include border-radius(0);

      .leaflet-touch & {
        // border: 0;
      }
    }
  }

  @media (max-width: $threshold-sm - 1px) {
    @include widths($width-xs);
  }

  @media (min-width: $threshold-sm) and (max-width: $threshold-md - 1px) {
    @include widths($width-sm);
  }

  @media (min-width: $threshold-md) and (max-width: $threshold-lg - 1px) {
    @include widths($width-md);
  }

  @media (min-width: $threshold-lg) {
    @include widths($width-lg);
  }

  .close {
    position: absolute;
    right: $spacing-unit-small;
    top: $spacing-unit-tiny; //20px;
    width: 30px;
    height: 30px;
    color: #333;
    font-size: 25pt;
    line-height: 1em;
    text-align: center;
    background: white;
    @include border-radius(16px);
    cursor: pointer;
    // Z-index : au-dessus du z-index du conteneur.
    z-index: $zindex-map + 3;
  }
}

.leaflet-left {
  transition: left $transition-duration;
}

.leaflet-right {
  transition: right $transition-duration;
}
